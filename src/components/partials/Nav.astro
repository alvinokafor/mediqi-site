---
import logoSmall from "/assets/logo-small.svg";
---

<nav class="w-full text-white">
  <!-- mobile menu -->
  <section
    id="mobile-menu"
    data-visible="false"
    class="absolute inset-0 z-50 h-screen space-y-8 bg-black/70 text-white backdrop-blur-md md:hidden"
  >
    <ul
      class="mx-auto mt-32 max-w-xs space-y-5 font-heading text-xl sm:max-w-xl"
    >
      <li><a href="/">Home</a></li>
      <li><a href="/about-us">About Us</a></li>
      <li><a href="/blog">Blog</a></li>
      <li><a href="/careers">Careers</a></li>
      <li><a href="/healthpedia">Healthpedia</a></li>
      <li class="font-sans">
        <button
          class="z-30 mt-4 rounded-full border-2 border-white bg-white py-2 px-[18px] font-bold text-slate-800 opacity-100 transition-all duration-300 hover:border-2 hover:border-white hover:bg-opacity-0 hover:text-white md:block"
          >Get started</button
        >
      </li>
    </ul>
  </section>
  <!-- mobile menu -->

  <!-- desktop menu -->
  <section
    class="menu mx-auto flex max-w-xs items-center justify-between py-9 sm:max-w-xl md:max-w-3xl lg:max-w-6xl"
  >
    <div class="z-50 flex items-center gap-x-12">
      <a href="/">
        <img class="menu-logo" src={logoSmall} alt="Comapany logo" />
      </a>

      <ul class="hidden gap-x-6 text-lg md:flex">
        <button
          ><li
            class={`transition-all ${
              Astro.url.pathname === "/" && "font-bold"
            } duration-100 hover:font-bold`}
          >
            <a href="/">Home</a>
          </li></button
        >
        <button
          ><li
            class={`transition-all ${
              Astro.url.pathname === "/about-us" && "font-bold"
            } duration-100 hover:font-bold`}
          >
            <a href="/about-us">About us</a>
          </li></button
        >
        <button
          ><li
            class={`transition-all ${
              Astro.url.pathname === "/blog" && "font-bold"
            } duration-100 hover:font-bold`}
          >
            <a href="/blog">Blog</a>
          </li></button
        >
        <button
          ><li
            class={`transition-all ${
              Astro.url.pathname === "/careers" && "font-bold"
            } duration-100 hover:font-bold`}
          >
            <a href="/careers">Careers</a>
          </li></button
        >
        <button
          ><li
            class={`transition-all ${
              Astro.url.pathname.includes("healthpedia") && "font-bold"
            } duration-100 hover:font-bold`}
          >
            <a href="/healthpedia">Healthpedia</a>
          </li></button
        >
      </ul>
    </div>

    <button
      class="menu-btn z-30 hidden rounded-full border-2 border-white bg-white py-3 px-[18px] text-lg font-bold text-secondary opacity-100 transition-all duration-300 hover:border-2 hover:border-white hover:bg-opacity-0 hover:text-white md:block"
      >Get started</button
    >

    <!-- <button class="z-30 md:hidden"
      ><img src={hamburgerMenu} alt="menu" /></button
    > -->

    <button
      id="menu-btn"
      class="hamburger z-50 h-5 w-6 cursor-pointer md:hidden"
    >
      <span class="hamburger-top h-0.5 w-6 bg-secondary"></span>
      <span class="hamburger-middle h-0.5 w-6 bg-secondary"></span>
      <span class="hamburger-bottom h-0.5 w-6 bg-secondary"></span>
    </button>
  </section>
  <!-- desktop menu -->
</nav>

<script>
  const btn = document.getElementById("menu-btn");
  btn.addEventListener("click", menuHandler);

  function menuHandler() {
    const bodyTag = document.querySelector(".body") as HTMLElement;
    const menu = document.getElementById("mobile-menu");
    const visibility = menu.getAttribute("data-visible");
    btn.classList.toggle("open");

    if (visibility === "false") {
      menu.setAttribute("data-visible", "true");
      bodyTag.style.overflow = "hidden";
    } else if (visibility === "true") {
      bodyTag.style.overflow = "auto";
      menu.setAttribute("data-visible", "false");
    }
  }

  const header = document.querySelector("header");
  const nav = document.querySelector("nav");

  const navOptions = {};

  const navObserver = new IntersectionObserver(function (entries, navObserver) {
    entries.forEach((entry) => {
      if (!entry.isIntersecting) {
        nav.classList.add("nav-active");
      } else {
        nav.classList.remove("nav-active");
      }
    });
  }, navOptions);

  navObserver.observe(header);
</script>

<style>
  .nav-active {
    position: fixed;
    color: #1d2238;
    background-color: white;
    transition: all;
    transition-duration: 200ms;
    box-shadow: 0px 0px 12px 0px rgba(0, 0, 0, 0.1);
    z-index: 50;
  }

  .nav-active .menu {
    padding-block: 20px;
  }

  .nav-active .menu-btn {
    color: white;
    background-color: #1d2238;
  }
  .nav-active .menu-btn:hover {
    color: #1d2238;
    background-color: transparent;
    border: 2px solid #1d2238;
  }

  .nav-active .menu-logo {
    filter: invert(90%);
  }

  .nav-active .hamburger-top {
    background-color: #1d2238;
  }
  .nav-active .hamburger-middle {
    background-color: #1d2238;
  }
  .nav-active .hamburger-bottom {
    background-color: #1d2238;
  }
</style>
